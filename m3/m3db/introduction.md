title: 'M3DB, 一个分布式时间序列数据库'
tags:
  - m3db
categories: []
date: 2019-05-16 13:53:00
---
## 关于

受[Gorilla](http://www.vldb.org/pvldb/vol8/p1816-teller.pdf)和[Cassandra](http://cassandra.apache.org/)启发的M3DB是Uber Technologies公开发布的分布式时间序列数据库。它可用于存储长时间保留的实时指标。

以下是该项目的一些属性：

* 分布式时间序列存储，单个节点使用WAL提交日志并独立地保留每个分片的时间窗口
* 集群管理建立在etcd之上
* 内置的同步复制，具有可配置的持久性和读取一致性（一个，多数，所有等）
* 受大Gorilla TSZ压缩启发的M3TSZ float64压缩，可配置为无损或有损
* 任意时间精度可配置为秒到纳秒的精度，能够在任何写入时切换精度
* 可配置的乱序写入，目前仅限于配置的时间窗口的块大小

## 现有限制

由于项目需求的性质，主要是为了降低摄取和存储数十亿个时间序列的成本并提供快速可扩展的读取，**目前有一些限制使M3DB不适合用作通用时间序列 数据库**。

该项目旨在尽可能避免压缩，目前M3DB执行的唯一压缩是在可变压缩时间序列窗口的内存中（默认配置为2小时）。 因此，乱序写入限于单个压缩时间序列窗口的大小。 因此，目前无法回填大量数据。

该项目还针对float64值的存储和检索进行了优化，因此无法将其用作任意数据结构的通用时间序列数据库。